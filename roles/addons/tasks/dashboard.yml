---
# create kubernetes-dashboard
- name: create dashboard pod file
  become: yes
  copy:
    src: dashboard-rc.yaml
    dest: "{{ kubernetes_manifest_dir }}/dashboard-rc.yaml"
  tags:
    - addons
    - dashboard

- name: create dashboard service file
  become: yes
  copy:
    src: dashboard-svc.yaml
    dest: "{{ kubernetes_manifest_dir }}/dashboard-svc.yaml"
  tags:
    - addons
    - dashboard

- name: Create dashboard replication controller
  become: yes
  kubernetes:
    api_endpoint: "{{ kubectl_endpoint }}"
    url_username: "{{ kubectl_username }}"
    url_password: "{{ kubectl_password }}"
    file_reference: "{{ kubernetes_manifest_dir }}/dashboard-rc.yaml"
    state: present
  tags:
    - addons
    - dashboard

- name: Create dashboard service
  become: yes
  kubernetes:
    api_endpoint: "{{ kubectl_endpoint }}"
    url_username: "{{ kubectl_username }}"
    url_password: "{{ kubectl_password }}"
    file_reference: "{{ kubernetes_manifest_dir }}/dashboard-svc.yaml"
    state: present
  tags:
    - addons
    - dashboard
